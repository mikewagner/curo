#!/usr/bin/env ruby
$:.unshift File.join( File.dirname(__FILE__), '..', 'lib' )

require 'rubygems'
require 'optparse'
require 'rssh'

args = ARGV.clone

options = {}
parser  = OptionParser.new do |opts|

  opts.on('-t', '--tag [TAG]', String, 'Specify the tag name to association to host') do |tag|
    self[:tag] = tag
  end

  opts.on('-u', '--user [USER]', String, 'Specify a user to connect to host as') do |user|
    self[:user] = user
  end

  opts.on_tail('-h', '--help', 'Display help' ) do
    puts parser
    exit 0
  end

end

parser.parse!

action_options   = parser.permute(args)
options[:action] = action_options.shift
options[:entry]  = action_options.shift

RSSH::Runner.new(RSSH::Configuration.load).run(options)

